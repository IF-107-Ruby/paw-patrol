$.magnificPopup.open({
  items: {
      src: '<%= j render "show" %>',
  },
  removalDelay: 300,
  mainClass: 'my-mfp-zoom-in',
  zoom: {
    enabled: true,
    duration: 300,
    easing: 'ease-in-out',
  },
  callbacks: {
    open: function () {
      $('#daterangepicker').daterangepicker(
        {
          timePicker: true,
          startDate: moment("<%= @event.starts_at %>").startOf("hour"),
          endDate: moment("<%= @event.ends_at %>").startOf("hour"),
          opens: "left",
          locale: {
            format: "MM/DD/YYYY HH:mm",
          },
        },
        function (start, end, label) {
          $("#event_starts_at").val(start.format("YYYY-MM-DD HH:mm"));
          $("#event_ends_at").val(end.format("YYYY-MM-DD HH:mm"));
        }
      );

      $("#daterangepicker").val(
        moment("<%= @event.starts_at %>").format("MM/DD/YYYY HH:mm") +
          " - " +
          moment("<%= @event.ends_at %>").format("MM/DD/YYYY HH:mm")
      );
    },
    afterClose: function () {
      $(".daterangepicker").remove();
      pickr.destroyAndRemove();
    }
  }
});

$(document).ready(function() {
  registerPopupTubs();
  $('#event_ticket_id').selectpicker();
  pickrInit();
})
