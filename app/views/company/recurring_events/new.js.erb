$.magnificPopup.open({
  items: {
      src: '<%= j render "new" %>',
  },
  removalDelay: 300,
  mainClass: 'my-mfp-zoom-in',
  zoom: {
    enabled: true,
    duration: 300,
    easing: 'ease-in-out',
  },
  callbacks: {
    open: function() {
      let start = moment("<%= @recurring_event.anchor %>")
      let end = moment("<%= @recurring_event.anchor + @recurring_event.duration.minutes %>");
      $('#daterangepicker').daterangepicker(
        {
          timePicker: true,
          startDate: start,
          endDate: end,
          opens: "left",
          locale: {
            format: "MM/DD/YYYY HH:mm",
          },
        },
        function (start, end, label) {
          $("#recurring_event_anchor").val(start.format("YYYY-MM-DD HH:mm"));
          $("#recurring_event_duration").val(end.diff(start, 'minutes'));
        }
      );

      $("#daterangepicker").val(
        start.format("MM/DD/YYYY HH:mm") +
          " - " +
        end.format("MM/DD/YYYY HH:mm")
      );
    },
    afterClose: function() {
      $(".daterangepicker").remove();
      pickr.destroyAndRemove();
    },
  }
});

$(document).ready(function() {
  registerPopupTubs();
  
  $('#recurring_event_ticket_id').selectpicker();
  $('#recurring_event_frequency').selectpicker();
  pickrInit();
})